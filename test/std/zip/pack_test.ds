fn test_create_simple
    zipped = zip ./target/_duckscript_test/zip/test_simple.zip ./Cargo.toml ./Cargo.lock
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_simple.zip
    assert ${exists}
end

fn test_create_base
    touch ./target/_duckscript_test/zip/foo.txt

    zipped = zip --base ./target/_duckscript_test ./target/_duckscript_test/zip/test_base.zip ./target/_duckscript_test/zip/foo.txt
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_base.zip
    assert ${exists}
end

fn test_append
    touch ./target/_duckscript_test/zip/foo.txt
    touch ./target/_duckscript_test/zip/bar.txt
    touch ./target/_duckscript_test/zip/baz/qux.txt

    zipped = zip --base ./target/_duckscript_test ./target/_duckscript_test/zip/test_append.zip ./target/_duckscript_test/zip/foo.txt
    assert ${zipped}

    zipped = zip --append --base ./target/_duckscript_test ./target/_duckscript_test/zip/test_append.zip ./target/_duckscript_test/zip/bar.txt
    assert ${zipped}

    zipped = zip --append --base ./target/_duckscript_test ./target/_duckscript_test/zip/test_append.zip ./target/_duckscript_test/zip/baz/qux.txt
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_append.zip
    assert ${exists}
end

fn test_compression_mode
    touch ./target/_duckscript_test/zip/foo.txt
    touch ./target/_duckscript_test/zip/bar.txt

    zipped = zip --compression deflate ./target/_duckscript_test/zip/test_deflate.zip ./target/_duckscript_test/zip/foo.txt ./target/_duckscript_test/zip/bar.txt
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_deflate.zip
    assert ${exists}

    zipped = zip --compression bzip2 ./target/_duckscript_test/zip/test_bzip2.zip ./target/_duckscript_test/zip/foo.txt ./target/_duckscript_test/zip/bar.txt
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_bzip2.zip
    assert ${exists}

    zipped = zip --compression none ./target/_duckscript_test/zip/test_none.zip ./target/_duckscript_test/zip/foo.txt ./target/_duckscript_test/zip/bar.txt
    assert ${zipped}

    exists = is_file ./target/_duckscript_test/zip/test_none.zip
    assert ${exists}
end
